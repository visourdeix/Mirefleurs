"use strict";var FMMod_Events=null;(function(n){FMMod_Events={initialiseScore:function(t){n(t+" .fm-results-score").on("change",function(){n(this).val()!==""?n(this).closest(".fm-match-thumbnail").find(".fm-results-state").val(1).trigger("liszt:updated"):n(this).closest(".fm-match-thumbnail").find('input[name*="score1"]').val()===""&&n(this).closest(".fm-match-thumbnail").find('input[name*="score2"]').val()===""&&n(this).closest(".fm-match-thumbnail").find(".fm-results-state").val(0).trigger("liszt:updated");n(this).closest(t).find("#toolbar #refresh, #toolbar #save").show();n(this).closest(t).find("#message").hide();n(this).closest(".fm-match-thumbnail").attr("data-updated","1")});n(t+" .fm-results-state").on("change",function(){n(this).prop("checked")?(n(this).closest(".fm-match-thumbnail").find('input[name*="score1"]').val()===""&&n(this).closest(".fm-match-thumbnail").find('input[name*="score1"]').val(0),n(this).closest(".fm-match-thumbnail").find('input[name*="score2"]').val()===""&&n(this).closest(".fm-match-thumbnail").find('input[name*="score2"]').val(0)):(n(this).closest(".fm-match-thumbnail").find('input[name*="score1"]').val(""),n(this).closest(".fm-match-thumbnail").find('input[name*="score2"]').val(""));n(this).closest(t).find("#toolbar #refresh, #toolbar #save").show();n(this).closest(t).find("#message").hide();n(this).closest(".fm-match-thumbnail").attr("data-updated","1")})},save:function(t,i){var r=[],u,f;n("#"+i+' .fm-match-thumbnail[data-updated="1"] input[name*="matches[id]"]').each(function(){var t={id:n(this).val(),score1:n(this).closest(".fm-match-thumbnail").find('input[name*="score1"]').val(),state:n(this).closest(".fm-match-thumbnail").find('select[name*="state"]').val(),score2:n(this).closest(".fm-match-thumbnail").find('input[name*="score2"]').val()};r.push(t)});u={matches:r};f=function(r){FMMod_Events.updateEvents(t,i);var u=n.parseJSON(r),f='<div class="alert alert-'+u["class"]+'">'+u.message+"<\/div>";n("#"+i+" #message").html(f);n("#"+i+" #message").show()};FM.loadAjax("index.php?option=com_fmmanager&task=match.saveOnAjax",u,f,"#"+i)},updateEvents:function(t,i){var r={},u;return n("#"+i+' #filter input[type="text"], #'+i+' #filter input[type="radio"]:checked').each(function(){var t=n(this).attr("name");if(t!==undefined){var i=t.indexOf("[")+1,u=t.indexOf("]",i),f=t.substring(i,u);r[f]=n(this).val()}}),n("#"+i+" #filter select option:selected").each(function(){var t=n(this).closest("select").attr("name"),f=n(this).closest("select").attr("multiple");if(t!==undefined){var u=t.indexOf("[")+1,e=t.indexOf("]",u),i=t.substring(u,e);f!==undefined?(r[i]||(r[i]=[]),r[i].push(n(this).val())):r[i]=n(this).val()}}),u=function(){n("#"+i+" .fm-results-score").TouchSpin({verticalbuttons:!0});n("#"+i+" .fm-results-state").removeClass("chzn-done").show();n("#"+i+" .fm-results-state").find(".chzn-container").remove();n("#"+i+" .fm-results-state").chosen({disable_search_threshold:5,allow_single_deselect:!1});n("#"+i+" .fm-results-state").statesselect();FMMod_Events.initialiseScore("#"+i);n("#"+i+" #refresh, #"+i+" #save").hide()},FM.displayModule(t,i,r,undefined,u),n("#"+i+" #message").hide(),!1},initialise:function(t,i){FMMod_Events.initialiseScore(i);n(i+" #filter input.on_change, "+i+" #filter select.on_change").on("change",function(){FMMod_Events.updateEvents(t,n(this).closest(i).attr("id"))});n(i+" #refresh, "+i+" #search").on("click",function(){FMMod_Events.updateEvents(t,n(this).closest(i).attr("id"))});n(i+" #save").on("click",function(){FMMod_Events.save(t,n(this).closest(i).attr("id"))});FMMod_Events.updateEvents(t,n(i).attr("id"))}}})(jQuery);
/*
//# sourceMappingURL=mod_events.min.js.map
*/